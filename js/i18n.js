const translations = {
  en: {
    meta_title: "Khadhami Academy | Future-Ready Learning for Kids",
    meta_description: "Khadhami Academy is a modern learning platform for coding, AI, robotics, and STEM. Safe by design, bilingual, and built for real outcomes.",

    skip_to_content: "Skip to content",
    brand_subtitle: "Khadhami Academy",
    lang_toggle: "العربية",
    toggle_menu: "Toggle navigation menu",
    toggle_language: "Switch language",
    toggle_theme: "Switch light or dark theme",

    nav_features: "Features",
    nav_pathways: "Pathways",
    nav_safety: "Safety",
    nav_pricing: "Pricing",
    nav_faq: "FAQ",
    nav_legal: "Legal",
    nav_get_app: "Get the app",

    hero_eyebrow: "Future skills, built with precision",
    hero_title: "Global-caliber learning for <span class='highlight'>future innovators</span>",
    hero_subtitle: "اكاديمية الخضمي gives families a safe and premium platform for coding, AI, robotics, and STEM mastery.",
    hero_cta_primary: "Download the app",
    hero_cta_secondary: "Explore platform",

    store_google_meta: "GET IT ON",
    store_apple_meta: "Download on the",

    preview_tagline: "Performance-driven learning platform",
    kpi_students: "Active learners",
    kpi_lessons: "Learning lessons",
    kpi_satisfaction: "Parent satisfaction",
    feed_item_1: "Live Class: Python Fundamentals",
    feed_status_live: "Live",
    feed_item_2: "Robotics Lab Challenge",
    feed_status_new: "New",
    feed_item_3: "AI for Young Innovators",
    feed_status_hot: "Hot",

    proof_students: "Learners progressing weekly",
    proof_tracks: "Structured pathways",
    proof_frameworks: "Learning frameworks",
    proof_support: "Technical support readiness",

    features_eyebrow: "Platform capabilities",
    features_title: "Everything needed for elite digital learning",
    features_subtitle: "From live classes to structured mastery analytics, every part of the experience is built for outcomes.",
    feature_1_title: "Live Classrooms",
    feature_1_desc: "Interactive sessions with real educators, whiteboards, and instant feedback.",
    feature_2_title: "Code Playground",
    feature_2_desc: "Practice Python and web coding directly inside the platform with guided projects.",
    feature_3_title: "AI and Robotics Labs",
    feature_3_desc: "Hands-on tracks that connect theory with real engineering problem-solving.",
    feature_4_title: "Parental Controls",
    feature_4_desc: "Family-safe controls including content boundaries and time management.",
    feature_5_title: "Offline Learning",
    feature_5_desc: "Download selected lessons and continue learning without internet disruptions.",
    feature_6_title: "Progress Intelligence",
    feature_6_desc: "Visual dashboards track mastery, consistency, and growth opportunities.",

    pathways_eyebrow: "Learning architecture",
    pathways_title: "Engineered with globally trusted methods",
    pathways_subtitle: "Our curriculum is intentionally built around execution frameworks used by top-performing organizations.",
    method_kaizen: "Small, continuous improvements that compound into long-term mastery.",
    method_agile: "Fast feedback loops and adaptive learning plans for every student.",
    method_sixsigma: "Quality-first delivery that reduces gaps and reinforces fundamentals.",
    method_lean: "Focus on high-impact skills, remove noise, maximize learning value.",

    timeline_title: "How growth is managed",
    timeline_step_1_title: "Assess",
    timeline_step_1_desc: "Initial baseline and skill-map creation.",
    timeline_step_2_title: "Plan",
    timeline_step_2_desc: "Personalized pathway with weekly goals.",
    timeline_step_3_title: "Execute",
    timeline_step_3_desc: "Live classes, labs, and guided project cycles.",
    timeline_step_4_title: "Optimize",
    timeline_step_4_desc: "Data-informed iteration with family visibility.",

    safety_eyebrow: "Trust and compliance",
    safety_title: "Safety, privacy, and child protection by default",
    safety_subtitle: "We design every workflow around child protection principles, transparent policies, and accountable operations.",
    safety_1: "Parental consent flows for minors",
    safety_2: "Clear data handling and retention policy",
    safety_3: "Moderated communication surfaces",
    safety_4: "Account deletion and data removal process",

    legal_cta_title: "Publish-ready legal center",
    legal_cta_desc: "Access all policies required for publishing and trust review workflows.",
    link_privacy: "Privacy Policy",
    link_terms: "Terms of Service",
    link_cookies: "Cookie Policy",
    link_child_safety: "Child Safety Policy",
    link_data_deletion: "Data Deletion",

    pricing_eyebrow: "Simple pricing",
    pricing_title: "Start free, scale when ready",
    pricing_subtitle: "Pricing is transparent and designed to support steady learning growth.",
    plan_free_title: "Starter",
    plan_free_period: "forever",
    plan_free_1: "Core lessons access",
    plan_free_2: "Selected live sessions",
    plan_free_3: "Basic progress tracking",
    plan_free_cta: "Start free",
    plan_pro_badge: "Most popular",
    plan_pro_title: "Pro",
    plan_pro_period: "per month",
    plan_pro_1: "Unlimited premium content",
    plan_pro_2: "Full code and AI labs",
    plan_pro_3: "Offline downloads",
    plan_pro_4: "Priority support",
    plan_pro_cta: "Upgrade to Pro",

    faq_eyebrow: "Questions",
    faq_title: "Frequently asked questions",
    faq_q1: "Is the platform suitable for beginners?",
    faq_a1: "Yes. Learning pathways start from fundamentals and adapt to student pace.",
    faq_q2: "How is child safety handled?",
    faq_a2: "We use moderated interactions, parental controls, and policy-based protections for minors.",
    faq_q3: "Can learners study offline?",
    faq_a3: "Yes. Selected lessons can be downloaded for offline access in supported plans.",
    faq_q4: "Where can I read legal policies?",
    faq_a4: "You can access Privacy Policy, Terms, Cookies, Child Safety, and Data Deletion pages in the legal center.",

    download_eyebrow: "Launch now",
    download_title: "Ready to build your child’s future advantage?",
    download_subtitle: "Download اكاديمية الخضمي and start a world-class learning journey today.",
    download_google: "Get it on Google Play",
    download_apple: "Download on App Store",

    legal_eyebrow: "Legal and publishing",
    legal_title: "Everything required for public release",
    legal_card_privacy: "How user data is collected, used, protected, and retained.",
    legal_card_terms: "Service rules, account obligations, subscriptions, and liability terms.",
    legal_card_cookies: "Cookie categories, preferences, and browser control options.",
    legal_card_child_safety: "Safeguards, moderation model, and parent reporting channels.",
    legal_card_data_deletion: "Account deletion and personal data removal requests.",

    footer_tagline: "Engineering the next generation of innovators.",
    footer_product: "Product",
    footer_legal: "Legal",
    footer_contact: "Contact",
    copyright_prefix: "Copyright",
    copyright_text: "Khadhami Academy. All rights reserved.",

    cookie_aria: "Cookie consent",
    cookie_message: "We use essential and analytics cookies to improve learning performance and platform quality.",
    cookie_decline: "Decline",
    cookie_accept: "Accept"
  },

  ar: {
    meta_title: "اكاديمية الخضمي | تعلم متقدم لأبناء المستقبل",
    meta_description: "اكاديمية الخضمي منصة تعليمية حديثة للبرمجة والذكاء الاصطناعي والروبوتات والعلوم التقنية، آمنة ومصممة بنتائج واضحة.",

    skip_to_content: "تخطي إلى المحتوى",
    brand_subtitle: "Khadhami Academy",
    lang_toggle: "English",
    toggle_menu: "فتح أو إغلاق قائمة التنقل",
    toggle_language: "تغيير اللغة",
    toggle_theme: "تبديل الوضع الفاتح أو الداكن",

    nav_features: "المزايا",
    nav_pathways: "المسارات",
    nav_safety: "الأمان",
    nav_pricing: "الأسعار",
    nav_faq: "الأسئلة",
    nav_legal: "السياسات",
    nav_get_app: "تحميل التطبيق",

    hero_eyebrow: "مهارات المستقبل، بتصميم هندسي",
    hero_title: "تجربة تعليم عالمية لصنّاع <span class='highlight'>ابتكار المستقبل</span>",
    hero_subtitle: "اكاديمية الخضمي تقدم للأسر منصة آمنة ومتميزة لتعلم البرمجة والذكاء الاصطناعي والروبوتات والعلوم التقنية.",
    hero_cta_primary: "تحميل التطبيق",
    hero_cta_secondary: "استكشف المنصة",

    store_google_meta: "حمّل من",
    store_apple_meta: "تنزيل عبر",

    preview_tagline: "منصة تعليم مبنية على الأداء",
    kpi_students: "متعلم نشط",
    kpi_lessons: "درس تعليمي",
    kpi_satisfaction: "رضا أولياء الأمور",
    feed_item_1: "فصل مباشر: أساسيات Python",
    feed_status_live: "مباشر",
    feed_item_2: "تحدي مختبر الروبوتات",
    feed_status_new: "جديد",
    feed_item_3: "الذكاء الاصطناعي للمبتكرين الصغار",
    feed_status_hot: "مميز",

    proof_students: "متعلمين يتقدمون أسبوعيا",
    proof_tracks: "مسارات تعليمية منظمة",
    proof_frameworks: "أطر تعلم منهجية",
    proof_support: "جاهزية الدعم التقني",

    features_eyebrow: "قدرات المنصة",
    features_title: "كل ما يلزم لتعلم تقني متقدم",
    features_subtitle: "من الفصول المباشرة إلى تحليلات الإتقان، كل جزء في التجربة مبني لتحقيق نتائج فعلية.",
    feature_1_title: "الفصول المباشرة",
    feature_1_desc: "جلسات تفاعلية مع معلمين حقيقيين وسبورات وملاحظات فورية.",
    feature_2_title: "ملعب البرمجة",
    feature_2_desc: "تدرب على Python وتطوير الويب داخل المنصة بمشاريع موجهة.",
    feature_3_title: "مختبرات الذكاء والروبوتات",
    feature_3_desc: "مسارات عملية تربط المفاهيم بالتطبيق الهندسي الحقيقي.",
    feature_4_title: "الرقابة الأبوية",
    feature_4_desc: "تحكم أسري آمن يتضمن حدود المحتوى وإدارة وقت الاستخدام.",
    feature_5_title: "التعلم دون إنترنت",
    feature_5_desc: "تحميل الدروس المختارة واستكمال التعلم بدون انقطاع.",
    feature_6_title: "تحليلات التقدم",
    feature_6_desc: "لوحات متابعة ذكية لقياس الإتقان والاستمرارية وفرص التحسين.",

    pathways_eyebrow: "معمارية التعلم",
    pathways_title: "مصممة بأطر عالمية موثوقة",
    pathways_subtitle: "منهجنا مبني على أنظمة تنفيذ تستخدمها الجهات الأعلى أداء حول العالم.",
    method_kaizen: "تحسينات صغيرة مستمرة تتراكم لتنتج إتقاناً طويل المدى.",
    method_agile: "دورات تغذية راجعة سريعة وخطط تعلم مرنة لكل طالب.",
    method_sixsigma: "تركيز على الجودة لتقليل الفجوات وتعزيز الأساسيات.",
    method_lean: "تركيز على المهارات الأعلى أثراً وتقليل أي هدر تعليمي.",

    timeline_title: "كيف تتم إدارة النمو",
    timeline_step_1_title: "Assess",
    timeline_step_1_desc: "تقييم البداية وبناء خريطة المهارات.",
    timeline_step_2_title: "Plan",
    timeline_step_2_desc: "مسار مخصص مع أهداف أسبوعية واضحة.",
    timeline_step_3_title: "Execute",
    timeline_step_3_desc: "فصول مباشرة ومختبرات ودورات مشاريع عملية.",
    timeline_step_4_title: "Optimize",
    timeline_step_4_desc: "تحسين مستمر بناء على البيانات ومتابعة الأسرة.",

    safety_eyebrow: "الثقة والامتثال",
    safety_title: "الأمان والخصوصية وحماية الطفل بشكل افتراضي",
    safety_subtitle: "نصمم كل رحلة تعلم وفق مبادئ حماية الطفل والسياسات الواضحة والمسؤولية التشغيلية.",
    safety_1: "تدفقات موافقة ولي الأمر للقُصّر",
    safety_2: "سياسة واضحة لجمع البيانات وحفظها",
    safety_3: "قنوات تواصل خاضعة للإشراف",
    safety_4: "آلية حذف الحساب والبيانات الشخصية",

    legal_cta_title: "مركز سياسات جاهز للنشر",
    legal_cta_desc: "وصول مباشر لكل السياسات المطلوبة للنشر والمراجعات التنظيمية.",
    link_privacy: "سياسة الخصوصية",
    link_terms: "شروط الخدمة",
    link_cookies: "سياسة الكوكيز",
    link_child_safety: "سياسة سلامة الطفل",
    link_data_deletion: "حذف البيانات",

    pricing_eyebrow: "أسعار بسيطة",
    pricing_title: "ابدأ مجاناً ثم طوّر عند الحاجة",
    pricing_subtitle: "تسعير واضح مصمم لدعم نمو تعليمي مستمر.",
    plan_free_title: "Starter",
    plan_free_period: "للأبد",
    plan_free_1: "وصول إلى الدروس الأساسية",
    plan_free_2: "جلسات مباشرة مختارة",
    plan_free_3: "متابعة تقدم أساسية",
    plan_free_cta: "ابدأ مجاناً",
    plan_pro_badge: "الأكثر اختياراً",
    plan_pro_title: "Pro",
    plan_pro_period: "شهرياً",
    plan_pro_1: "وصول غير محدود للمحتوى المتميز",
    plan_pro_2: "مختبرات البرمجة والذكاء كاملة",
    plan_pro_3: "تحميل الدروس دون إنترنت",
    plan_pro_4: "دعم ذو أولوية",
    plan_pro_cta: "الترقية إلى Pro",

    faq_eyebrow: "الأسئلة",
    faq_title: "الأسئلة الشائعة",
    faq_q1: "هل المنصة مناسبة للمبتدئين؟",
    faq_a1: "نعم، المسارات تبدأ من الأساسيات وتتكيّف مع سرعة تعلم الطالب.",
    faq_q2: "كيف تتم حماية الأطفال داخل المنصة؟",
    faq_a2: "نطبق إشرافاً على التفاعل، ورقابة أبوية، وسياسات حماية مخصصة للقُصّر.",
    faq_q3: "هل يمكن التعلم بدون إنترنت؟",
    faq_a3: "نعم، يمكن تحميل الدروس المختارة للتعلم دون اتصال في الخطط المدعومة.",
    faq_q4: "أين أجد السياسات القانونية؟",
    faq_a4: "يمكنك الوصول إلى سياسة الخصوصية والشروط والكوكيز وسلامة الطفل وحذف البيانات من مركز السياسات.",

    download_eyebrow: "ابدأ الآن",
    download_title: "جاهز لبناء ميزة مستقبلية قوية لطفلك؟",
    download_subtitle: "حمّل اكاديمية الخضمي وابدأ رحلة تعلم عالمية اليوم.",
    download_google: "حمّل من Google Play",
    download_apple: "حمّل من App Store",

    legal_eyebrow: "السياسات والنشر",
    legal_title: "كل ما يلزم للإطلاق والنشر العام",
    legal_card_privacy: "كيف نجمع بيانات المستخدم ونستخدمها ونحميها ونحتفظ بها.",
    legal_card_terms: "قواعد الخدمة والتزامات الحساب والاشتراكات وحدود المسؤولية.",
    legal_card_cookies: "أنواع الكوكيز وتفضيلات الاستخدام وخيارات التحكم.",
    legal_card_child_safety: "ضوابط السلامة ونموذج الإشراف وقنوات الإبلاغ.",
    legal_card_data_deletion: "طلبات حذف الحساب وإزالة البيانات الشخصية.",

    footer_tagline: "نبني جيلاً جديداً من المبتكرين.",
    footer_product: "المنتج",
    footer_legal: "السياسات",
    footer_contact: "التواصل",
    copyright_prefix: "جميع الحقوق",
    copyright_text: "محفوظة لاكاديمية الخضمي.",

    cookie_aria: "موافقة استخدام الكوكيز",
    cookie_message: "نستخدم ملفات تعريف الارتباط الأساسية والتحليلية لتحسين جودة المنصة ونتائج التعلم.",
    cookie_decline: "رفض",
    cookie_accept: "موافقة"
  }
};

function detectBrowserLanguage() {
  const language = (navigator.language || navigator.userLanguage || "en").toLowerCase();
  return language.startsWith("ar") ? "ar" : "en";
}

let currentLanguage = detectBrowserLanguage();

function updateMeta(language) {
  const content = translations[language];
  if (!content) return;

  document.title = content.meta_title;

  const description = document.querySelector('meta[name="description"]');
  if (description) description.setAttribute("content", content.meta_description);

  const ogTitle = document.querySelector('meta[property="og:title"]');
  if (ogTitle) ogTitle.setAttribute("content", content.meta_title);

  const ogDescription = document.querySelector('meta[property="og:description"]');
  if (ogDescription) ogDescription.setAttribute("content", content.meta_description);

  const twitterTitle = document.querySelector('meta[name="twitter:title"]');
  if (twitterTitle) twitterTitle.setAttribute("content", content.meta_title);

  const twitterDescription = document.querySelector('meta[name="twitter:description"]');
  if (twitterDescription) twitterDescription.setAttribute("content", content.meta_description);
}

function setLanguage(language) {
  currentLanguage = translations[language] ? language : detectBrowserLanguage();
  const content = translations[currentLanguage];
  if (!content) return;

  document.documentElement.lang = currentLanguage;
  document.documentElement.dir = currentLanguage === "ar" ? "rtl" : "ltr";

  document.querySelectorAll("[data-i18n]").forEach((element) => {
    const key = element.getAttribute("data-i18n");
    if (content[key] !== undefined) {
      element.textContent = content[key];
    }
  });

  document.querySelectorAll("[data-i18n-html]").forEach((element) => {
    const key = element.getAttribute("data-i18n-html");
    if (content[key] !== undefined) {
      element.innerHTML = content[key];
    }
  });

  document.querySelectorAll("[data-i18n-aria]").forEach((element) => {
    const key = element.getAttribute("data-i18n-aria");
    if (content[key] !== undefined) {
      element.setAttribute("aria-label", content[key]);
    }
  });

  updateMeta(currentLanguage);

  document.dispatchEvent(
    new CustomEvent("ka:language-change", {
      detail: { language: currentLanguage }
    })
  );
}

function toggleLanguage() {
  setLanguage(currentLanguage === "ar" ? "en" : "ar");
}

function getCurrentLanguage() {
  return currentLanguage;
}

function initI18n() {
  setLanguage(detectBrowserLanguage());
}

window.KAi18n = {
  initI18n,
  setLanguage,
  toggleLanguage,
  getCurrentLanguage,
  translations
};
